<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZPEAKU™ - ¡Bienvenido!</title>
    <link rel="stylesheet" href="/styles/tokens.css">
    <link rel="stylesheet" href="/styles/base.css">
</head>
<body class="z-theme-light">
    <main class="welcome-container">
        <h1 class="logo-text z-pulse">ZPEAKU™</h1>
        <h2 class="i18n-welcome-title">¡Bienvenido a la Constitución Viva!</h2>
        
        <p class="i18n-welcome-text">
            Tu sesión ha sido verificada con éxito. Estás listo para participar en la plataforma.
            <br>
            Serás redirigido al Feed principal en breve...
        </p>

        <a href="/" class="button button-primary mt-5">Continuar al Feed (Manual)</a>

    </main>

    <script type="module" src="/lib/i18n.js"></script>
    <script type="module">
        import { supa } from '/lib/supa.js';

        // Lógica: Esperar unos segundos y redirigir al feed principal
        setTimeout(() => {
            console.log("Redirigiendo al feed principal (/).");
            window.location.href = '/';
        }, 3000); // 3 segundos de espera

        // Verificar que la sesión es válida (aunque Supabase ya lo hizo)
        supa.auth.getSession().then(({ data }) => {
            if (!data.session) {
                // Si por alguna razón no hay sesión, regresamos a la página de bienvenida (que ahora es index.html)
                window.location.href = '/';
            }
        });
    </script>
</body>
</html>
